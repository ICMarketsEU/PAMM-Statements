var browserDbReadComplete=false;var browserCacheReadComplete=false;var formSubmitted=false;var mfaDiv;var accessibleMessageElement;function readCacheMfa(a){var d=a.replace(/\-/g,"=");var b=d.split(/&/);var e=mfaDiv.value;for(var c=0;c<b.length;c++){var f=b[c];if(e.indexOf(f)<0){e+=f+";"}}mfaDiv.value=e;browserCacheReadComplete=true;checkForComplete()}function _ec_replace(f,c,e){if(f.indexOf("&"+c+"=")>-1||f.indexOf(c+"=")==0){var a=f.indexOf("&"+c+"=");if(a==-1){a=f.indexOf(c+"=")}var b=f.indexOf("&",a+1);var d;if(b!=-1){d=f.substr(0,a)+f.substr(b+(a?0:1))+"&"+c+"="+e}else{d=f.substr(0,a)+"&"+c+"="+e}return d}else{return f+"&"+c+"="+e}}function getFromStr(b,f){if(typeof f!=="string"){return}var e=b+"=",a=f.split(/[;&]/),d,g;for(d=0;d<a.length;d++){g=a[d];while(g.charAt(0)===" "){g=g.substring(1,g.length)}if(g.indexOf(e)===0){return g.substring(e.length,g.length)}}}function cacheData(b){document.cookie="fp_cache=; expires=Mon, 20 Sep 2010 00:00:00 UTC; path=/";var a;if(window.XMLHttpRequest){a=new XMLHttpRequest()}else{a=new ActiveXObject("Microsoft.XMLHTTP")}a.onreadystatechange=function(){if(a.readyState==4&&a.status==200){readCacheMfa(a.responseText)}};a.open("GET",b+"/mfaCache",true);a.send()}function setAlertMessage(a){if(!accessibleMessageElement){accessibleMessageElement=document.getElementById("accessibleAlertMessage")}accessibleMessageElement.setAttribute("role","alert");accessibleMessageElement.parentNode.setAttribute("aria-live","assertive");accessibleMessageElement.setAttribute("aria-live","assertive");accessibleMessageElement.innerHTML="";var b=document.createTextNode(a);accessibleMessageElement.appendChild(b);accessibleMessageElement.style.display="none";accessibleMessageElement.style.display="inline"}function setMfa(a){try{setTimeout(forceSubmit,4000);mfaDiv=document.getElementById("mfaLSO");var b="";var k=document.getElementById("loadingMsgDiv").innerHTML;setTimeout(function(){setAlertMessage(k)},1000);if(window.localStorage){for(var j in localStorage){if(new RegExp("MAF_IB_*","g").test(j)){b+=j+"="+localStorage.getItem(j)+";"}}}var c=window.name.split(/&/);for(var d=0;d<c.length;d++){var g=c[d];if(b.indexOf(g)<0){b+=g+";"}}if(window.openDatabase){var h=window.openDatabase("sqlite_mfacookie","","mfacookie",1024*1024);h.transaction(function(e){e.executeSql("SELECT name,value FROM cache",[],function(l,n){if(n.rows.length>=1){for(var m=0;m<n.rows.length;m++){g=n.rows.item(m)["name"]+"="+n.rows.item(m)["value"];if(b.indexOf(g)<0){b+=g+";"}}mfaDiv.value=b;browserDbReadComplete=true;checkForComplete()}},function(i,l){browserDbReadComplete=true;checkForComplete()})})}else{browserDbReadComplete=true}mfaDiv.value=b;cacheData(a)}catch(f){forceSubmit()}}function checkForComplete(){if(browserCacheReadComplete&&browserDbReadComplete){if(!formSubmitted){formSubmitted=true;document.forms[0].submit()}}}function forceSubmit(){if(!formSubmitted){formSubmitted=true;document.forms[0].submit()}};